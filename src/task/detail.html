<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
    <title>Hello Coder</title>
</head>
<body>
    <div class="main">

        <div id="detail-main"></div>

        <!-- title -->
        <script id="detail-main-tmpl" type="x-tmpl-mustache">
        {{> title}}
        {{> describe}}

        <!-- 成员 -->
        <dl id="partner" class="layout-list partner">
            <dt class="sub-title">{{ lang.partner }}</dt>
            <!-- Call pub data -->
            {{#userInfoFail}}
            <dd>没有获取到人员信息</dd>
            {{/userInfoFail}}
            {{^userInfoFail}}
            <div class="loading-status">
                <span class="loading"></span>
                <span class="loading-text">加载中</span>
            </div>
            {{/userInfoFail}}
        </dl>

        <!-- 事件 & 讨论 -->
        <div class="layout-list affair-talk-wrapper hide">
            <dl id="affair-talk" class="affair-talk">
                <dt class="sub-title">事件与讨论</dt>
                <!-- 另一个异步请求获取数据 -->
            </dl>

            <div id="affair-talk-more-handler" class="load-more">
                <!-- JS create -->
            </div>
        </div>

        <!-- 附件 -->
        <div class="layout-list attach">
            <div class="sub-title">附件</div>
            <div class="attach-container"></div>
        </div>

        <!-- 底部按钮条 -->
        {{#rights}}
        <div class="fixbar">
            <ul>
                {{#audit_right}}
                <li>{{ lang.notAgree }}</li>
                <li>{{ lang.agree }}</li>
                {{/audit_right}}

                {{#add_event_right}}
                <li data-page="/affair-new.html?task_id={{ task_id }}">{{ lang.newAffair }}</li>
                {{/add_event_right}}

                {{#add_talk_right}}
                <li data-page="/talk-new.html?task_id={{ task_id }}">{{ lang.startTalk }}</li>
                {{/add_talk_right}}

                {{#apply_right}}
                <li data-page="/form-submit.html?type=0&master={{ isMaster }}&task_id={{ task_id }}">{{ lang.taskDone }}</li>
                {{/apply_right}}
            </ul>
        </div>
        {{/rights}}

        </script>

    </div>
    
    <!-- 事件和讨论 -->
    <script id="affair-talk-tmpl" type="x-tmpl-mustache">
    {{#list}}
    <dd data-pagenum="{{ pagenum }}" tid="{{ target_id }}" class="affair-talk-item {{#num}}new-msg{{/num}}" data-page="/{{ pageType }}-detail.html?id={{ target_id }}&task_id={{ task_id }}" >
        <div class="column-left">
            [{{ typeRaw }}] {{ title }}
        </div>
        <div class="column-right">
            <div class="column-more">
                {{#num}}
                <em class="count">{{ num }}</em>
                {{/num}}
                <em class="arrow"><i></i></em>
            </div>
        </div>
    </dd>
    {{/list}}
    </script>
    
    <!-- 团队成员 -->
    <script id="partner-tmpl" type="x-tmpl-mustache">
    <dt class="sub-title">{{ lang.partner }}</dt>
    {{#creator}}
    <dd>
        <div class="column-left">创建人: </div>
        <div class="column-middle">
            <div class="column-inner">
                {{ creator }}
            </div>
        </div>
    </dd>
    {{/creator}}

    {{#principal}}
    <dd>
        <div class="column-left">负责人: </div>
        <div class="column-middle">
            <div class="column-inner">
                {{ principal }}
            </div>
        </div>
    </dd>
    {{/principal}}

    {{#partnerLength}}
    <dd class="partner-more" data-jids="{{partnerJids}}">
        <div class="column-left">参与人: </div>
        <div class="column-middle">
            <div class="column-inner">
                {{partnerRaw}}
            </div>
        </div>
        <div class="column-right">
            <div class="column-more">
                {{#partnerLength}}
                <em>{{ partnerLength }}人</em>
                <em class="arrow"><i></i></em>
                {{/partnerLength}}
            </div>
        </div>
    </dd>
    {{/partnerLength}}
    </script>

    <script type="text/javascript" src="./cordova.js"></script>
</body>

</html>